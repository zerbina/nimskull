<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>utils/astrepr</title>
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css">

<script type="text/javascript" src="../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">utils/astrepr</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple-boot">
      <li><a href="manual.html">Manual</a></li>
      <li><a href="style_guide.html">Style guide</a></li>
      <li><a href="contributing.html">Contribution guide</a></li>
      <li><a href="lib.html">Standard library</a></li>
      <li><a href="../theindex.html">Index</a></li>
      <li><a href="compiler/../theindex.html">Compiler docs</a></li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#TReprConf"
    title="TReprConf = object
  flags*: set[TReprFlag] ## Set of the formatting options for the
                         ## procedure. Several built-in constants are defined in this module
                         ## that might be suitable for different debugging or AST exploration
                         ## tasks.
  maxDepth*: int ## Ignore all nodes that are placed deeper than that.
                 ## Useful to see a high-level overview for large nodes, such as full
                 ## proc bodies
  maxLen*: int ## on each level, print upto that number of subnodes.
               ## Useful to cut out parts on large `case` trees, toplevel nodes for
               ## modules, statement lists and such.
  maxPath*: int              ## maximum path length for subnodes
  extraNodeInfo*: proc (node: PNode): ColText ## Additional information
                                              ## for node, symbol or type printing. By default these procs are not
                                              ## implemented and ignored. If the procedure is not nil it is called at
                                              ## the start of each entry (before mandatory fields and nested
                                              ## elements) and results are indented to match the surroundings.
  extraSymInfo*: proc (sym: PSym): ColText ## Extra info for symbol
  extraTypInfo*: proc (typ: PType): ColText ## Extra info for type">TReprConf</a></li>
  <li><a class="reference" href="#TReprFlag"
    title="TReprFlag = enum
  trfReportInfo,            ## Show information about embedded semantic report errors
  trfPackedFields, ## Put fields horizontally instead of arranging them
                    ## out veritcally. Should be used only when a small
                    ## number of total fields is enabled, otherwise output
                    ## will be unreadable.
  trfSkipAuxError,          ## Skip 'data store' fields of the `nkError` node -
                             ## elements `[1..2]` are used to store additional
                             ## metadata and are rarely needed for printing.
  trfIndexVisisted,         ## Enumerate each visited node when printing the
                             ## `PNode` tree
  trfShowDefaultedFields,   ## Show fields with defaulted values
  trfShowSymFlags,          ## Show symbol `.flags` field
  trfShowSymLineInfo,       ## Line information
  trfShowSymName, trfShowSymTypes, ## Flat render of the symbol type
  trfShowSymMagic,          ## used symbol magic
  trfShowSymKind,           ## `.kind`
  trfShowSymOwner,          ## Full chain of the symbol owners
  trfShowSymOptions,        ## `.options`
  trfShowSymPosition,       ## `.position`
  trfShowSymOffset,         ## `.offset`
  trfShowSymBitsize,        ## `.bitsize`
  trfShowSymAlignment,      ## `.alignment`
  trfShowSymAst,            ## `.ast` from the symbol
  trfShowSymId,             ## `module` and `item` from `itemId` field
  trfShowTypeCallConv,      ## Calling convention
  trfShowTypeFlags,         ## `.flags`
  trfShowTypeSym,           ## `.sym`
  trfShowTypeAlloc,         ## `.align` and `.size` fields. They represent a
                             ## single logical chunk of information, and pinter together
  trfShowTypeOwner,         ## Full chain of the type owner
  trfShowTypeId,            ## `module` and `item` from `itemId` field
  trfShowNodeLineInfo,      ## Node location information
  trfShowNodeFlags,         ## `.flags`
  trfShowNodeIds,           ## `.id` field, available when compiler is built with `-d:nodeIds`
  trfShowNodeComments,      ## `.comment` field
  trfShowNodeErrors,        ## Embedded `nkError` reports
  trfShowNodeTypes           ## Flat render of the node type">TReprFlag</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#8" id="58">Vars</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#implicitTReprConf"
    title="implicitTReprConf: TReprConf = defaultTReprConf">implicitTReprConf</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#9" id="59">Lets</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#compactTReprConf"
    title="compactTReprConf = defaultTReprConf + trfPackedFields">compactTReprConf</a></li>
  <li><a class="reference" href="#defaultTReprConf"
    title="defaultTReprConf = TReprConf(maxDepth: 120, maxLen: 30, maxPath: 1, flags: {
    trfReportInfo, trfSkipAuxError, trfShowSymFlags,
    trfShowSymName..trfShowSymOwner, trfShowSymOffset..trfShowSymAlignment,
    trfShowTypeCallConv..trfShowTypeSym, trfShowTypeOwner,
    trfShowNodeFlags..trfShowNodeTypes})">defaultTReprConf</a></li>
  <li><a class="reference" href="#onlyStructureTReprConf"
    title="onlyStructureTReprConf = block:
  var base = defaultTReprConf
  base.flags = {trfShowNodeComments}
  base.maxPath = 0
  base">onlyStructureTReprConf</a></li>
  <li><a class="reference" href="#verboseTReprConf"
    title="verboseTReprConf = block:   ## Show absolutely everything
  var base = defaultTReprConf + {low(TReprFlag)..high(TReprFlag)} -
      {trfPackedFields}
  base.maxPath = 40
  base">verboseTReprConf</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#10" id="60">Consts</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#treeReprAllFields"
    title="treeReprAllFields = {trfShowSymFlags..trfShowNodeTypes}">treeReprAllFields</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">+
      <li><a class="reference" href="#%2B%2CTReprConf%2C"
    title="`+`(conf: TReprConf; flag: TReprFlag | set[TReprFlag]): TReprConf">`+`(conf: TReprConf; flag: TReprFlag | set[TReprFlag]): TReprConf</a></li>

  </ul>
  <ul class="simple nested-toc-section">-
      <li><a class="reference" href="#-%2CTReprConf%2C"
    title="`-`(conf: TReprConf; flag: TReprFlag | set[TReprFlag]): TReprConf">`-`(conf: TReprConf; flag: TReprFlag | set[TReprFlag]): TReprConf</a></li>

  </ul>
  <ul class="simple nested-toc-section">debug
      <li><a class="reference" href="#debug%2CConfigRef%2C"
    title="debug(conf: ConfigRef; it: PNode | PType | PSym)">debug(conf: ConfigRef; it: PNode | PType | PSym)</a></li>
  <li><a class="reference" href="#debug%2CConfigRef%2C%2CTReprConf"
    title="debug(conf: ConfigRef; it: PNode | PType | PSym; tconf: TReprConf)">debug(conf: ConfigRef; it: PNode | PType | PSym; tconf: TReprConf)</a></li>
  <li><a class="reference" href="#debug"
    title="debug(it: PNode | PSym | PNode)">debug(it: PNode | PSym | PNode)</a></li>
  <li><a class="reference" href="#debug%2C%2CTReprConf"
    title="debug(it: PNode | PSym | PNode; tconf: TReprConf)">debug(it: PNode | PSym | PNode; tconf: TReprConf)</a></li>

  </ul>
  <ul class="simple nested-toc-section">debugAst
      <li><a class="reference" href="#debugAst%2CPNode"
    title="debugAst(it: PNode)">debugAst(it: PNode)</a></li>

  </ul>
  <ul class="simple nested-toc-section">debugSym
      <li><a class="reference" href="#debugSym%2CPSym"
    title="debugSym(it: PSym)">debugSym(it: PSym)</a></li>

  </ul>
  <ul class="simple nested-toc-section">debugType
      <li><a class="reference" href="#debugType%2CPType"
    title="debugType(it: PType)">debugType(it: PType)</a></li>

  </ul>
  <ul class="simple nested-toc-section">excl
      <li><a class="reference" href="#excl%2CTReprConf%2C"
    title="excl(conf: var TReprConf; flag: TReprFlag | set[TReprFlag])">excl(conf: var TReprConf; flag: TReprFlag | set[TReprFlag])</a></li>

  </ul>
  <ul class="simple nested-toc-section">incl
      <li><a class="reference" href="#incl%2CTReprConf%2C"
    title="incl(conf: var TReprConf; flag: TReprFlag | set[TReprFlag])">incl(conf: var TReprConf; flag: TReprFlag | set[TReprFlag])</a></li>

  </ul>
  <ul class="simple nested-toc-section">inFile
      <li><a class="reference" href="#inFile%2CConfigRef%2C%2Cstring%2CSlice%5Bint%5D"
    title="inFile(conf: ConfigRef; node: PNode | PSym; file: string;
       lrange: Slice[int] = low(int) .. high(int)): bool">inFile(conf: ConfigRef; node: PNode | PSym; file: string;
       lrange: Slice[int] = low(int) .. high(int)): bool</a></li>
  <li><a class="reference" href="#inFile%2C%2Cstring%2CSlice%5Bint%5D"
    title="inFile(node: PNode | PSym; file: string;
       lrange: Slice[int] = low(int) .. high(int)): bool">inFile(node: PNode | PSym; file: string;
       lrange: Slice[int] = low(int) .. high(int)): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">inLines
      <li><a class="reference" href="#inLines%2CPNode%2CSlice%5Bint%5D"
    title="inLines(node: PNode; lrange: Slice[int]): bool">inLines(node: PNode; lrange: Slice[int]): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">setImplicitDebugConfRef
      <li><a class="reference" href="#setImplicitDebugConfRef%2CConfigRef"
    title="setImplicitDebugConfRef(conf: ConfigRef)">setImplicitDebugConfRef(conf: ConfigRef)</a></li>

  </ul>
  <ul class="simple nested-toc-section">treeRepr
      <li><a class="reference" href="#treeRepr%2CConfigRef%2CPNode%2CTReprConf%2Cint"
    title="treeRepr(conf: ConfigRef; pnode: PNode; rconf: TReprConf = implicitTReprConf;
         indent: int = 0): ColText">treeRepr(conf: ConfigRef; pnode: PNode; rconf: TReprConf = implicitTReprConf;
         indent: int = 0): ColText</a></li>
  <li><a class="reference" href="#treeRepr%2CConfigRef%2CPSym%2CTReprConf%2Cint"
    title="treeRepr(conf: ConfigRef; sym: PSym; rconf: TReprConf = implicitTReprConf;
         indent: int = 0): ColText">treeRepr(conf: ConfigRef; sym: PSym; rconf: TReprConf = implicitTReprConf;
         indent: int = 0): ColText</a></li>
  <li><a class="reference" href="#treeRepr%2CConfigRef%2CPType%2CTReprConf%2Cint"
    title="treeRepr(conf: ConfigRef; typ: PType; rconf: TReprConf = implicitTReprConf;
         indent: int = 0): ColText">treeRepr(conf: ConfigRef; typ: PType; rconf: TReprConf = implicitTReprConf;
         indent: int = 0): ColText</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
    <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

  <p class="module-desc"><p><tt class="docutils literal"><span class="pre"><span class="Identifier">treeRepr</span><span class="Punctuation">(</span><span class="Punctuation">)</span></span></tt> implementation for the <tt class="docutils literal"><span class="pre"><span class="Identifier">PNode</span></span></tt> tree structures. This module provides helper procedures that can be used for debugging purposes - dumping compiler IR in the textual form.</p>
<p>For each IR type (<tt class="docutils literal"><span class="pre">PType</span></tt>, <tt class="docutils literal"><span class="pre">PSym</span></tt>, <tt class="docutils literal"><span class="pre">PNode</span></tt>) there are several procs defined:</p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">treeRepr</span></span></tt> - main implementation to generate the <tt class="docutils literal"><span class="pre"><span class="Identifier">ColText</span></span></tt> chunk for the object.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">debug</span></span></tt> - convenience ovelroads that print generated text immediately. There are two version of the <tt class="docutils literal"><span class="pre"><span class="Identifier">debug</span></span></tt> - one that accept <tt class="docutils literal"><span class="pre"><span class="Identifier">ConfigRef</span></span></tt> object, and one that can work without it. Both call <tt class="docutils literal"><span class="pre"><span class="Identifier">treeRepr</span></span></tt> internally, but with <tt class="docutils literal"><span class="pre"><span class="Identifier">ConfigRef</span></span></tt> present more information can be printed.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">debugAst</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">debugSym</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">debugType</span></span></tt> - procs added for use in <tt class="docutils literal"><span class="pre"><span class="Identifier">gdb</span></span></tt> debugging. They have <tt class="docutils literal"><span class="pre"><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">exportc</span><span class="Operator">.</span><span class="Punctuation">}</span></span></tt> annotations, so can be used directly by name there</li>
</ul>
<p><tt class="docutils literal"><span class="pre"><span class="Identifier">treeRepr</span></span></tt> and all other procedures in the module accept <tt class="docutils literal"><span class="pre"><span class="Identifier">TReprConf</span></span></tt> object (default value is provided via <tt class="docutils literal"><span class="pre"><span class="Identifier">implicitTReprConf</span></span></tt> global, for gdb procs it is used implicitly) that controls which fields specifically will be printed.</p>
<p>Configuration object also includes callbacks that would allow you to provide additional information for the printed targets. For example, you want to perform some analysis, and don't have <tt class="docutils literal"><span class="pre"><span class="Identifier">ConfigRef</span></span></tt> object passed around (because your code <em>only</em> collects some data from the nodes). But then you need to figure out the actual location of where node comes from. In that case you simply assign to <tt class="docutils literal"><span class="pre"><span class="Identifier">implicitTReprConf</span><span class="Operator">.</span><span class="Identifier">extraNodeInfo</span></span></tt>, and next <tt class="docutils literal"><span class="pre"><span class="Identifier">debug</span></span></tt> you call will provide needed information.</p>
<pre class="listing"><span class="Identifier">implicitTReprConf</span><span class="Operator">.</span><span class="Identifier">extraNodeInfo</span> <span class="Operator">=</span> <span class="Keyword">proc</span><span class="Punctuation">(</span><span class="Identifier">node</span><span class="Punctuation">:</span> <span class="Identifier">PNode</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">ColText</span> <span class="Operator">=</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">add</span> <span class="StringLit">&quot;node location &quot;</span> <span class="Operator">&amp;</span> <span class="Punctuation">(</span><span class="Identifier">config</span> <span class="Operator">$</span> <span class="Identifier">node</span><span class="Operator">.</span><span class="Identifier">info</span><span class="Punctuation">)</span></pre></p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="../ast/ast.html">../ast/ast</a>, <a class="reference external" href="../ast/reports.html">../ast/reports</a>, <a class="reference external" href="../ast/renderer.html">../ast/renderer</a>, <a class="reference external" href="../ast/lineinfos.html">../ast/lineinfos</a>, <a class="reference external" href="../ast/errorhandling.html">../ast/errorhandling</a>, <a class="reference external" href="../front/options.html">../front/options</a>, <a class="reference external" href="../front/msgs.html">../front/msgs</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="TReprConf">
<dt><pre><a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">flags</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">set</span><span class="Other">[</span><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a><span class="Other">]</span> <span class="Comment">## Set of the formatting options for the</span>
                         <span class="Comment">## procedure. Several built-in constants are defined in this module</span>
                         <span class="Comment">## that might be suitable for different debugging or AST exploration</span>
                         <span class="Comment">## tasks.</span>
  <span class="Identifier">maxDepth</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Comment">## Ignore all nodes that are placed deeper than that.</span>
                 <span class="Comment">## Useful to see a high-level overview for large nodes, such as full</span>
                 <span class="Comment">## proc bodies</span>
  <span class="Identifier">maxLen</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Comment">## on each level, print upto that number of subnodes.</span>
               <span class="Comment">## Useful to cut out parts on large `case` trees, toplevel nodes for</span>
               <span class="Comment">## modules, statement lists and such.</span>
  <span class="Identifier">maxPath</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>              <span class="Comment">## maximum path length for subnodes</span>
  <span class="Identifier">extraNodeInfo</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">node</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">ColText</span> <span class="Comment">## Additional information</span>
                                              <span class="Comment">## for node, symbol or type printing. By default these procs are not</span>
                                              <span class="Comment">## implemented and ignored. If the procedure is not nil it is called at</span>
                                              <span class="Comment">## the start of each entry (before mandatory fields and nested</span>
                                              <span class="Comment">## elements) and results are indented to match the surroundings.</span>
  <span class="Identifier">extraSymInfo</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">sym</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">ColText</span> <span class="Comment">## Extra info for symbol</span>
  <span class="Identifier">extraTypInfo</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">typ</span><span class="Other">:</span> <a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">ColText</span> <span class="Comment">## Extra info for type</span>
  </pre></dt>
<dd>

Main debug configuration object
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L114"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L114" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TReprFlag">
<dt><pre><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">trfReportInfo</span><span class="Other">,</span>            <span class="Comment">## Show information about embedded semantic report errors</span>
  <span class="Identifier">trfPackedFields</span><span class="Other">,</span> <span class="Comment">## Put fields horizontally instead of arranging them</span>
                    <span class="Comment">## out veritcally. Should be used only when a small</span>
                    <span class="Comment">## number of total fields is enabled, otherwise output</span>
                    <span class="Comment">## will be unreadable.</span>
  <span class="Identifier">trfSkipAuxError</span><span class="Other">,</span>          <span class="Comment">## Skip 'data store' fields of the `nkError` node -</span>
                             <span class="Comment">## elements `[1..2]` are used to store additional</span>
                             <span class="Comment">## metadata and are rarely needed for printing.</span>
  <span class="Identifier">trfIndexVisisted</span><span class="Other">,</span>         <span class="Comment">## Enumerate each visited node when printing the</span>
                             <span class="Comment">## `PNode` tree</span>
  <span class="Identifier">trfShowDefaultedFields</span><span class="Other">,</span>   <span class="Comment">## Show fields with defaulted values</span>
  <span class="Identifier">trfShowSymFlags</span><span class="Other">,</span>          <span class="Comment">## Show symbol `.flags` field</span>
  <span class="Identifier">trfShowSymLineInfo</span><span class="Other">,</span>       <span class="Comment">## Line information</span>
  <span class="Identifier">trfShowSymName</span><span class="Other">,</span> <span class="Identifier">trfShowSymTypes</span><span class="Other">,</span> <span class="Comment">## Flat render of the symbol type</span>
  <span class="Identifier">trfShowSymMagic</span><span class="Other">,</span>          <span class="Comment">## used symbol magic</span>
  <span class="Identifier">trfShowSymKind</span><span class="Other">,</span>           <span class="Comment">## `.kind`</span>
  <span class="Identifier">trfShowSymOwner</span><span class="Other">,</span>          <span class="Comment">## Full chain of the symbol owners</span>
  <span class="Identifier">trfShowSymOptions</span><span class="Other">,</span>        <span class="Comment">## `.options`</span>
  <span class="Identifier">trfShowSymPosition</span><span class="Other">,</span>       <span class="Comment">## `.position`</span>
  <span class="Identifier">trfShowSymOffset</span><span class="Other">,</span>         <span class="Comment">## `.offset`</span>
  <span class="Identifier">trfShowSymBitsize</span><span class="Other">,</span>        <span class="Comment">## `.bitsize`</span>
  <span class="Identifier">trfShowSymAlignment</span><span class="Other">,</span>      <span class="Comment">## `.alignment`</span>
  <span class="Identifier">trfShowSymAst</span><span class="Other">,</span>            <span class="Comment">## `.ast` from the symbol</span>
  <span class="Identifier">trfShowSymId</span><span class="Other">,</span>             <span class="Comment">## `module` and `item` from `itemId` field</span>
  <span class="Identifier">trfShowTypeCallConv</span><span class="Other">,</span>      <span class="Comment">## Calling convention</span>
  <span class="Identifier">trfShowTypeFlags</span><span class="Other">,</span>         <span class="Comment">## `.flags`</span>
  <span class="Identifier">trfShowTypeSym</span><span class="Other">,</span>           <span class="Comment">## `.sym`</span>
  <span class="Identifier">trfShowTypeAlloc</span><span class="Other">,</span>         <span class="Comment">## `.align` and `.size` fields. They represent a</span>
                             <span class="Comment">## single logical chunk of information, and pinter together</span>
  <span class="Identifier">trfShowTypeOwner</span><span class="Other">,</span>         <span class="Comment">## Full chain of the type owner</span>
  <span class="Identifier">trfShowTypeId</span><span class="Other">,</span>            <span class="Comment">## `module` and `item` from `itemId` field</span>
  <span class="Identifier">trfShowNodeLineInfo</span><span class="Other">,</span>      <span class="Comment">## Node location information</span>
  <span class="Identifier">trfShowNodeFlags</span><span class="Other">,</span>         <span class="Comment">## `.flags`</span>
  <span class="Identifier">trfShowNodeIds</span><span class="Other">,</span>           <span class="Comment">## `.id` field, available when compiler is built with `-d:nodeIds`</span>
  <span class="Identifier">trfShowNodeComments</span><span class="Other">,</span>      <span class="Comment">## `.comment` field</span>
  <span class="Identifier">trfShowNodeErrors</span><span class="Other">,</span>        <span class="Comment">## Embedded `nkError` reports</span>
  <span class="Identifier">trfShowNodeTypes</span>           <span class="Comment">## Flat render of the node type</span></pre></dt>
<dd>

Configuration options for treeRepr debugging
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L70"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L70" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="8">
<h1><a class="toc-backref" href="#8">Vars</a></h1>
<dl class="item">
<div id="implicitTReprConf">
<dt><pre><a href="astrepr.html#implicitTReprConf"><span class="Identifier">implicitTReprConf</span></a><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a> <span class="Other">=</span> <a href="astrepr.html#defaultTReprConf"><span class="Identifier">defaultTReprConf</span></a></pre></dt>
<dd>

global configuration object that is implicitly used by <tt class="docutils literal"><span class="pre"><span class="Identifier">debugAst</span></span></tt> and <tt class="docutils literal"><span class="pre"><span class="Identifier">debugType</span></span></tt>. Can be used in order to configure behaviour of the debugging functions that could later be called from <tt class="docutils literal"><span class="pre"><span class="Identifier">gdb</span></span></tt> environment (<tt class="docutils literal"><span class="pre"><span class="Identifier">debugAst</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">debugType</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">debugSym</span></span></tt>), or sem execution tracer
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L209"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L209" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="9">
<h1><a class="toc-backref" href="#9">Lets</a></h1>
<dl class="item">
<div id="compactTReprConf">
<dt><pre><a href="astrepr.html#compactTReprConf"><span class="Identifier">compactTReprConf</span></a> <span class="Other">=</span> <a href="astrepr.html#defaultTReprConf"><span class="Identifier">defaultTReprConf</span></a> <span class="Operator">+</span> <span class="Identifier">trfPackedFields</span></pre></dt>
<dd>

Compacted tree repr configuration
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L199"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L199" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="defaultTReprConf">
<dt><pre><a href="astrepr.html#defaultTReprConf"><span class="Identifier">defaultTReprConf</span></a> <span class="Other">=</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a><span class="Other">(</span><span class="Identifier">maxDepth</span><span class="Other">:</span> <span class="DecNumber">120</span><span class="Other">,</span> <span class="Identifier">maxLen</span><span class="Other">:</span> <span class="DecNumber">30</span><span class="Other">,</span> <span class="Identifier">maxPath</span><span class="Other">:</span> <span class="DecNumber">1</span><span class="Other">,</span> <span class="Identifier">flags</span><span class="Other">:</span> <span class="Other">{</span>
    <span class="DecNumber">trfReportInfo</span><span class="Other">,</span> <span class="DecNumber">trfSkipAuxError</span><span class="Other">,</span> <span class="DecNumber">trfShowSymFlags</span><span class="Other">,</span>
    <span class="DecNumber">trfShowSymName</span><span class="Other">..</span><span class="DecNumber">trfShowSymOwner</span><span class="Other">,</span> <span class="DecNumber">trfShowSymOffset</span><span class="Other">..</span><span class="DecNumber">trfShowSymAlignment</span><span class="Other">,</span>
    <span class="DecNumber">trfShowTypeCallConv</span><span class="Other">..</span><span class="DecNumber">trfShowTypeSym</span><span class="Other">,</span> <span class="DecNumber">trfShowTypeOwner</span><span class="Other">,</span>
    <span class="DecNumber">trfShowNodeFlags</span><span class="Other">..</span><span class="DecNumber">trfShowNodeTypes</span><span class="Other">}</span><span class="Other">)</span></pre></dt>
<dd>

Default based configuration for the tree repr printing functions
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L159"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L159" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="onlyStructureTReprConf">
<dt><pre><a href="astrepr.html#onlyStructureTReprConf"><span class="Identifier">onlyStructureTReprConf</span></a> <span class="Other">=</span> <span class="Keyword">block</span><span class="Other">:</span>
  <span class="Keyword">var</span> <span class="Identifier">base</span> <span class="Other">=</span> <a href="astrepr.html#defaultTReprConf"><span class="Identifier">defaultTReprConf</span></a>
  <span class="Identifier">base</span><span class="Other">.</span><span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">trfShowNodeComments</span><span class="Other">}</span>
  <span class="Identifier">base</span><span class="Other">.</span><span class="Identifier">maxPath</span> <span class="Other">=</span> <span class="DecNumber">0</span>
  <span class="Identifier">base</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L178"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L178" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="verboseTReprConf">
<dt><pre><a href="astrepr.html#verboseTReprConf"><span class="Identifier">verboseTReprConf</span></a> <span class="Other">=</span> <span class="Keyword">block</span><span class="Other">:</span>   <span class="Comment">## Show absolutely everything</span>
  <span class="Keyword">var</span> <span class="Identifier">base</span> <span class="Other">=</span> <a href="astrepr.html#defaultTReprConf"><span class="Identifier">defaultTReprConf</span></a> <span class="Operator">+</span> <span class="Other">{</span><span class="Identifier">low</span><span class="Other">(</span><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a><span class="Other">)</span><span class="Other">..</span><span class="Identifier">high</span><span class="Other">(</span><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a><span class="Other">)</span><span class="Other">}</span> <span class="Operator">-</span>
      <span class="Other">{</span><span class="Identifier">trfPackedFields</span><span class="Other">}</span>
  <span class="Identifier">base</span><span class="Other">.</span><span class="Identifier">maxPath</span> <span class="Other">=</span> <span class="DecNumber">40</span>
  <span class="Identifier">base</span></pre></dt>
<dd>

Show absolutely everything
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L201"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L201" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#10">Consts</a></h1>
<dl class="item">
<div id="treeReprAllFields">
<dt><pre><a href="astrepr.html#treeReprAllFields"><span class="Identifier">treeReprAllFields</span></a> <span class="Other">=</span> <span class="Other">{</span><span class="DecNumber">trfShowSymFlags</span><span class="Other">..</span><span class="DecNumber">trfShowNodeTypes</span><span class="Other">}</span></pre></dt>
<dd>

Set of flags to print all fields in all tree reprs
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L139"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L139" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="+,TReprConf,">
<dt><pre><span class="Keyword">func</span> <a href="#%2B%2CTReprConf%2C"><span class="Identifier">`+`</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a><span class="Other">;</span> <span class="Identifier">flag</span><span class="Other">:</span> <a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a> <span class="Operator">|</span> <span class="Identifier">set</span><span class="Other">[</span><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L191"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L191" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="-,TReprConf,">
<dt><pre><span class="Keyword">func</span> <a href="#-%2CTReprConf%2C"><span class="Identifier">`-`</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a><span class="Other">;</span> <span class="Identifier">flag</span><span class="Other">:</span> <a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a> <span class="Operator">|</span> <span class="Identifier">set</span><span class="Other">[</span><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L195"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L195" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="debug,ConfigRef,">
<dt><pre><span class="Keyword">proc</span> <a href="#debug%2CConfigRef%2C"><span class="Identifier">debug</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a><span class="Other">;</span> <span class="Identifier">it</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Print tree representation of the AST
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L792"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L792" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="debug,ConfigRef,,TReprConf">
<dt><pre><span class="Keyword">proc</span> <a href="#debug%2CConfigRef%2C%2CTReprConf"><span class="Identifier">debug</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a><span class="Other">;</span> <span class="Identifier">it</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">;</span> <span class="Identifier">tconf</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Print tree representation of the AST
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L784"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L784" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="debug">
<dt><pre><span class="Keyword">proc</span> <a href="#debug"><span class="Identifier">debug</span></a><span class="Other">(</span><span class="Identifier">it</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Convenience overload of <tt class="docutils literal"><span class="pre"><span class="Identifier">debugAst</span></span></tt>
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L788"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L788" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="debug,,TReprConf">
<dt><pre><span class="Keyword">proc</span> <a href="#debug%2C%2CTReprConf"><span class="Identifier">debug</span></a><span class="Other">(</span><span class="Identifier">it</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">;</span> <span class="Identifier">tconf</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Convenience overload of <tt class="docutils literal"><span class="pre"><span class="Identifier">debugAst</span></span></tt>
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L780"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L780" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="debugAst,PNode">
<dt><pre><span class="Keyword">proc</span> <a href="#debugAst%2CPNode"><span class="Identifier">debugAst</span></a><span class="Other">(</span><span class="Identifier">it</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">)</span> {.<span class="Identifier">exportc</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span><span class="Other">,</span>
                           <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
                           <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Print out tree representation of the AST node.<div class="admonition admonition-info"><span class="admonition-info-text"><b>Note:</b></span>
there is no <tt class="docutils literal"><span class="pre"><span class="Identifier">ConfigRef</span></span></tt> argument, and because of that some information cannot be fully retrieved from the AST (such as full paths of the FileIndex entries).</div>
<div class="admonition admonition-info"><span class="admonition-info-text"><b>Tip:</b></span>
This proc is annotated with <tt class="docutils literal"><span class="pre"><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">exportc</span><span class="Operator">.</span><span class="Punctuation">}</span></span></tt> which means it's mangled name exactly the same - <tt class="docutils literal"><span class="pre"><span class="Identifier">debugAst</span></span></tt> and you can call it from the <tt class="docutils literal"><span class="pre"><span class="Identifier">gdb</span></span></tt> debugging session.</div>

&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L758"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L758" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="debugSym,PSym">
<dt><pre><span class="Keyword">proc</span> <a href="#debugSym%2CPSym"><span class="Identifier">debugSym</span></a><span class="Other">(</span><span class="Identifier">it</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">)</span> {.<span class="Identifier">exportc</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span><span class="Other">,</span>
                          <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
                          <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Print out tree represntation of the symbol. Can also be used in gdb debugging session due to <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="Identifier">exportc</span><span class="Operator">.</span></span></tt> annotation
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L775"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L775" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="debugType,PType">
<dt><pre><span class="Keyword">proc</span> <a href="#debugType%2CPType"><span class="Identifier">debugType</span></a><span class="Other">(</span><span class="Identifier">it</span><span class="Other">:</span> <a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a><span class="Other">)</span> {.<span class="Identifier">exportc</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span><span class="Other">,</span>
                            <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
                            <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Print out tree represntation of the type. Can also be used in gdb debugging session due to <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="Identifier">exportc</span><span class="Operator">.</span></span></tt> annotation
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L770"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L770" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="excl,TReprConf,">
<dt><pre><span class="Keyword">func</span> <a href="#excl%2CTReprConf%2C"><span class="Identifier">excl</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a><span class="Other">;</span> <span class="Identifier">flag</span><span class="Other">:</span> <a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a> <span class="Operator">|</span> <span class="Identifier">set</span><span class="Other">[</span><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L188"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L188" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="incl,TReprConf,">
<dt><pre><span class="Keyword">func</span> <a href="#incl%2CTReprConf%2C"><span class="Identifier">incl</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a><span class="Other">;</span> <span class="Identifier">flag</span><span class="Other">:</span> <a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a> <span class="Operator">|</span> <span class="Identifier">set</span><span class="Other">[</span><a href="astrepr.html#TReprFlag"><span class="Identifier">TReprFlag</span></a><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L185"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L185" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="inFile,ConfigRef,,string,Slice[int]">
<dt><pre><span class="Keyword">proc</span> <a href="#inFile%2CConfigRef%2C%2Cstring%2CSlice%5Bint%5D"><span class="Identifier">inFile</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a><span class="Other">;</span> <span class="Identifier">node</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">;</span> <span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span>
            <span class="Identifier">lrange</span><span class="Other">:</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span> <span class="Other">=</span> <span class="Identifier">low</span><span class="Other">(</span><span class="Identifier">int</span><span class="Other">)</span> <span class="Operator">..</span> <span class="Identifier">high</span><span class="Other">(</span><span class="Identifier">int</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Check if file name of the <tt class="docutils literal"><span class="pre"><span class="Identifier">info</span></span></tt> has <tt class="docutils literal"><span class="pre"><span class="Identifier">filename</span></span></tt> in it, and that node is located in the specified line range. For debugging purposes as it is pretty slow.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L800"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L800" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="inFile,,string,Slice[int]">
<dt><pre><span class="Keyword">proc</span> <a href="#inFile%2C%2Cstring%2CSlice%5Bint%5D"><span class="Identifier">inFile</span></a><span class="Other">(</span><span class="Identifier">node</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a> <span class="Operator">|</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">;</span> <span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span>
            <span class="Identifier">lrange</span><span class="Other">:</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span> <span class="Other">=</span> <span class="Identifier">low</span><span class="Other">(</span><span class="Identifier">int</span><span class="Other">)</span> <span class="Operator">..</span> <span class="Identifier">high</span><span class="Other">(</span><span class="Identifier">int</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Check if file name of the <tt class="docutils literal"><span class="pre"><span class="Identifier">info</span></span></tt> has <tt class="docutils literal"><span class="pre"><span class="Identifier">filename</span></span></tt> in it. For debugging purposes as it is pretty slow. Should be used like this:<dl class="docutils"><dt>..code-block::nim</dt>
<dd><dl class="docutils"><dt>if inFile(conf, node.info, &quot;filename&quot;):</dt>
<dd>debug node # For example</dd>
</dl>
</dd>
</dl>
<p>This proc requries implicit debug config to be set, since information about nodde file names is not available otherwise.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L812"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L812" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="inLines,PNode,Slice[int]">
<dt><pre><span class="Keyword">proc</span> <a href="#inLines%2CPNode%2CSlice%5Bint%5D"><span class="Identifier">inLines</span></a><span class="Other">(</span><span class="Identifier">node</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">;</span> <span class="Identifier">lrange</span><span class="Other">:</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span><span class="Other">,</span>
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L796"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L796" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="setImplicitDebugConfRef,ConfigRef">
<dt><pre><span class="Keyword">proc</span> <a href="#setImplicitDebugConfRef%2CConfigRef"><span class="Identifier">setImplicitDebugConfRef</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;DEBUG proc, should not be used in the final build!&quot;</span><span class="Other">,</span>
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> DEBUG proc, should not be used in the final build!
  </div>

Set implicit debug config reference.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L754"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L754" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="treeRepr,ConfigRef,PNode,TReprConf,int">
<dt><pre><span class="Keyword">proc</span> <a href="#treeRepr%2CConfigRef%2CPNode%2CTReprConf%2Cint"><span class="Identifier">treeRepr</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a><span class="Other">;</span> <span class="Identifier">pnode</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">;</span>
              <span class="Identifier">rconf</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a> <span class="Other">=</span> <span class="Identifier">implicitTReprConf</span><span class="Other">;</span> <span class="Identifier">indent</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">ColText</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Generate tree representation from <tt class="docutils literal"><span class="pre"><span class="Identifier">PNode</span></span></tt>.</p>
<p>Procedure arguments:</p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre">conf</span></tt>: used to get some configuration options, such as <tt class="docutils literal"><span class="pre">--filenames:canonical</span></tt>, but it is mostly used to get full paths from file ids</li>
<li><tt class="docutils literal"><span class="pre">pnode</span></tt>: node to print - can be <tt class="docutils literal"><span class="pre"><span class="Keyword">nil</span></span></tt>, recursive, <tt class="docutils literal"><span class="pre"><span class="Identifier">nkError</span></span></tt> or any other kind form or shape.</li>
<li><tt class="docutils literal"><span class="pre">rconf</span></tt>: print configuration - all nested calls to <tt class="docutils literal"><span class="pre">treeRepr</span></tt> also used it (for <tt class="docutils literal"><span class="pre">PType</span></tt> and <tt class="docutils literal"><span class="pre">PSym</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">indentIncreas</span></span></tt>: start tree indentation from certain formatting</li>
</ul>
<p>Generated output packs in a lot of information - here is a short list of features, those will be elaborated on</p>
<ul class="simple"><li>subnode index in relation to the parent node, optionally extended index (like<tt class="docutils literal"><span class="pre"><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span></span></tt>)</li>
<li>symbol kind, flags, other relevant elements</li>
<li>type, if exists</li>
<li>comment message (optionally)</li>
<li>all node flags</li>
<li>all IDs when applicable</li>
<li>maximum target node depth and maximum node length (to avoid drowning in dumps when printing large entries)</li>
<li>pack things as close as possible horizontally, or make them more spaced out vertically</li>
<li>node declaration information</li>
<li>any associated structured reports (IDs, kinds, generation location)</li>
<li>symbol definition location if any</li>
<li>type symbols definition location if any</li>
</ul>
<div class="admonition admonition-info"><span class="admonition-info-text"><b>Note:</b></span>
Output examples in the documentation might be slightly different from the actual output due to changes in the default formatting options, or layout changes.</div>
<pre class="listing">Call
0 Sym vmTarget (file.vmTarget)
    sk:   Proc
    flags:{Used, Global}
    typ:  Proc (arg):
1 ObjConstr
    nflags:{Sem}
    typ:  Object sk:Type
1.0 Sym Obj (file.Obj)
      sk:   Type
      flags:{Used, Global}
      typ:  Object sk:Type</pre><p>This is a tree representation listing from the end of the <tt class="docutils literal"><span class="pre"><span class="Identifier">semexprs</span><span class="Operator">.</span><span class="Identifier">semExpr</span></span></tt> for this piece of code:</p>
<pre class="listing"><span class="Identifier">vmTarget</span><span class="Punctuation">(</span><span class="Identifier">Obj</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">)</span></pre><ul class="simple"><li><p><tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="DecNumber">0</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="DecNumber">1</span></span></tt> and <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="FloatNumber">1.0</span></span></tt> show subnode positions of the analyzed input. This is very useful when you need to index into input tree - you can immediately see necessary positions.</p>
<p><strong>TODO</strong>: Allow printing out special defines, like <tt class="docutils literal"><span class="pre"><span class="Identifier">ast</span><span class="Operator">.</span><span class="Identifier">pragmasPos</span></span></tt> instead of the hardcoded indices</p>
</li>
<li>After node position comes the node symbol - <tt class="docutils literal"><span class="pre"><span class="Identifier">Call</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">Sym</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">ObjConstr</span></span></tt> and so on - they correspond to the value of the <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="Identifier">kind</span></span></tt> field of the node.</li>
<li>If node in question is some form of token (identifier, symbol, text or numeric literal) it is printed after node kind - <tt class="docutils literal"><span class="pre"><span class="Identifier">Sym</span> <span class="Identifier">vmTarget</span></span></tt> means that it is a symbol that <tt class="docutils literal"><span class="pre"><span class="Identifier">mvTarget</span></span></tt> has resolved into, in your code.<ul class="simple"><li>If symbol node has an <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="Identifier">owner</span></span></tt> set, it is printed adjacent to the name - <tt class="docutils literal"><span class="pre"><span class="Identifier">file</span><span class="Operator">.</span><span class="Identifier">vmTarget</span></span></tt> means that input node symbol had <tt class="docutils literal"><span class="pre"><span class="Identifier">owner</span></span></tt> and it's name was <tt class="docutils literal"><span class="pre"><span class="Identifier">file</span></span></tt></li>
</ul>
</li>
<li>In addition to short summary of the node kind and it's 'value' information is printed in the fields down below. Most fields are optional, and displayed only if target value is non-nil or not empty (for sets)<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">sk</span></span></tt> stands for 'symbol kind' and shows which specific kind of the symbol - <tt class="docutils literal"><span class="pre"><span class="Identifier">skProc</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">skLet</span></span></tt> etc.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">flags</span></span></tt> - set of the <tt class="docutils literal"><span class="pre"><span class="Identifier">TNodeFlag</span></span></tt> enums</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">typ</span></span></tt> - type of the node</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">err</span></span></tt> - optional field, shown only for <tt class="docutils literal"><span class="pre"><span class="Identifier">nkError</span></span></tt> nodes. Contains type of the error report. Corresponds to the <tt class="docutils literal"><span class="pre"><span class="Identifier">rsem</span><span class="Operator">*</span></span></tt> report kinds in the <tt class="docutils literal"><span class="pre"><span class="Identifier">reports</span><span class="Operator">.</span><span class="Identifier">ReportKind</span></span></tt></li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">errid</span></span></tt> - shown after error report kind and corresponds to the ID of the <em>stored</em> error report. Note that only reports that are processed via <tt class="docutils literal"><span class="pre"><span class="Identifier">nkError</span></span></tt> are enumerated, so <tt class="docutils literal"><span class="pre"><span class="Identifier">errid</span><span class="Punctuation">:</span><span class="DecNumber">1</span></span></tt> does not mean it is the first report ever created, it means it it the first report that got into AST. Warnings, hints and other internal messages are processed in different channel.</li>
</ul>
</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre"><span class="Identifier">treeRepr</span></span></tt> is also useful for printing out AST with <tt class="docutils literal"><span class="pre"><span class="Identifier">nkError</span></span></tt> nodes. This piece of code will fail to compile because there is no <tt class="docutils literal"><span class="pre"><span class="Operator">+</span></span></tt> overload that can accept <tt class="docutils literal"><span class="pre"><span class="Identifier">Obj</span><span class="Punctuation">(</span><span class="Punctuation">)</span></span></tt> and <tt class="docutils literal"><span class="pre"><span class="DecNumber">12</span></span></tt></p>
<pre class="listing"><span class="Identifier">vmTarget</span><span class="Punctuation">(</span><span class="Identifier">Obj</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">+</span> <span class="DecNumber">2</span><span class="Punctuation">)</span></pre><pre class="listing"><span class="Identifier">Error</span>
  <span class="Identifier">err</span><span class="Punctuation">:</span>  <span class="Identifier">CallTypeMismatch</span> <span class="Identifier">errid</span><span class="Punctuation">:</span><span class="DecNumber">2</span>
  <span class="Identifier">typ</span><span class="Punctuation">:</span>  <span class="Identifier">Proxy</span>
<span class="DecNumber">0</span> <span class="Identifier">Call</span>
<span class="FloatNumber">0.0</span> <span class="Identifier">Ident</span> <span class="Identifier">vmTarget</span>
<span class="FloatNumber">0.1</span> <span class="Identifier">Error</span>
      <span class="Identifier">err</span><span class="Punctuation">:</span>  <span class="Identifier">CallTypeMismatch</span> <span class="Identifier">errid</span><span class="Punctuation">:</span><span class="DecNumber">1</span>
      <span class="Identifier">nflags</span><span class="Punctuation">:</span><span class="Punctuation">{</span><span class="Identifier">Sem</span><span class="Punctuation">}</span>
      <span class="Identifier">typ</span><span class="Punctuation">:</span>  <span class="Identifier">Proxy</span>
<span class="FloatNumber">0.1</span><span class="Operator">.</span><span class="DecNumber">0</span> <span class="Identifier">Infix</span>
  <span class="FloatNumber">1.0</span><span class="Operator">.</span><span class="DecNumber">0</span> <span class="Identifier">Ident</span> <span class="Operator">+</span>
  <span class="FloatNumber">1.0</span><span class="Operator">.</span><span class="DecNumber">1</span> <span class="Identifier">ObjConstr</span>
          <span class="Identifier">nflags</span><span class="Punctuation">:</span><span class="Punctuation">{</span><span class="Identifier">Sem</span><span class="Punctuation">}</span>
          <span class="Identifier">typ</span><span class="Punctuation">:</span>  <span class="Keyword">Object</span> <span class="Identifier">sk</span><span class="Punctuation">:</span><span class="Keyword">Type</span>
    <span class="FloatNumber">0.1</span><span class="Operator">.</span><span class="DecNumber">0</span> <span class="Identifier">Sym</span> <span class="Identifier">Obj</span> <span class="Punctuation">(</span><span class="Identifier">file</span><span class="Operator">.</span><span class="Identifier">Obj</span><span class="Punctuation">)</span>
            <span class="Identifier">sk</span><span class="Punctuation">:</span>   <span class="Keyword">Type</span>
            <span class="Identifier">flags</span><span class="Punctuation">:</span><span class="Punctuation">{</span><span class="Identifier">Used</span><span class="Punctuation">,</span> <span class="Identifier">Global</span><span class="Punctuation">}</span>
            <span class="Identifier">typ</span><span class="Punctuation">:</span>  <span class="Keyword">Object</span> <span class="Identifier">sk</span><span class="Punctuation">:</span><span class="Keyword">Type</span>
  <span class="FloatNumber">1.0</span><span class="Operator">.</span><span class="DecNumber">2</span> <span class="Identifier">IntLit</span> <span class="DecNumber">2</span>
          <span class="Identifier">nflags</span><span class="Punctuation">:</span><span class="Punctuation">{</span><span class="Identifier">Sem</span><span class="Punctuation">}</span></pre><p>Note the <tt class="docutils literal"><span class="pre"><span class="Identifier">Error</span></span></tt> node at <tt class="docutils literal"><span class="pre"><span class="FloatNumber">0.1</span></span></tt> in the ast. In addition to the regular fields it shows error type (<tt class="docutils literal"><span class="pre"><span class="Identifier">CallTypeMismatch</span></span></tt> and error report id). Note that due to <tt class="docutils literal"><span class="pre"><span class="Identifier">nkError</span></span></tt> propagation AST contains multiple error nodes. Innermost was caused by missing <tt class="docutils literal"><span class="pre"><span class="Operator">+</span></span></tt> overload, and then <tt class="docutils literal"><span class="pre"><span class="Identifier">vmTarget</span></span></tt> also failed to resolve, due to malformed arguments. </p>

&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L509"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L509" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="treeRepr,ConfigRef,PSym,TReprConf,int">
<dt><pre><span class="Keyword">proc</span> <a href="#treeRepr%2CConfigRef%2CPSym%2CTReprConf%2Cint"><span class="Identifier">treeRepr</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a><span class="Other">;</span> <span class="Identifier">sym</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">;</span> <span class="Identifier">rconf</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a> <span class="Other">=</span> <span class="Identifier">implicitTReprConf</span><span class="Other">;</span>
              <span class="Identifier">indent</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">ColText</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L394"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L394" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="treeRepr,ConfigRef,PType,TReprConf,int">
<dt><pre><span class="Keyword">proc</span> <a href="#treeRepr%2CConfigRef%2CPType%2CTReprConf%2Cint"><span class="Identifier">treeRepr</span></a><span class="Other">(</span><span class="Identifier">conf</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a><span class="Other">;</span> <span class="Identifier">typ</span><span class="Other">:</span> <a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a><span class="Other">;</span> <span class="Identifier">rconf</span><span class="Other">:</span> <a href="astrepr.html#TReprConf"><span class="Identifier">TReprConf</span></a> <span class="Other">=</span> <span class="Identifier">implicitTReprConf</span><span class="Other">;</span>
              <span class="Identifier">indent</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">ColText</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/2a399aa3df5d3175c750f94d9be1cd535c0a3759/compiler/utils/astrepr.nim#L443"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/utils/astrepr.nim#L443" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2022-02-26 00:00:00 UTC</small>
      </div>
    </div>
  </div>
</div>
</body>
</html>
